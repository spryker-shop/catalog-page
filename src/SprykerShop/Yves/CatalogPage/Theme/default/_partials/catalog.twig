{{ widget('cmsBlock', 'top') }}

<form method="GET" data-component="catalog-filter-form">
    <div class="row">

        {% include '@CatalogPage/_partials/spelling-suggestion.twig' %}

        <div class="small-12 medium-12 large-4 xlarge-3 columns">
            <input id="catalog-filters" type="checkbox" class="__toggler __no-margin-bottom hide" checked>
            <div class="callout hide-for-large">
                <label for="catalog-filters" class="button hollow expanded __no-margin-bottom">
                    <i class="fa fa-filter"></i> Show/Hide filters
                </label>
            </div>
            <div class="__toggler-target">
                {% include '@CatalogPage/_partials/filters.twig' %}
            </div>

            {{ widget('cmsBlock', 'middle') }}
        </div>

        <div class="small-12 medium-12 large-8 xlarge-9 columns">

            {% include '@CatalogPage/_partials/sort.twig' %}

            {% include '@CatalogPage/_partials/active-filters.twig' %}

            {% include '@CatalogPage/_partials/pagination.twig' %}

            <div class="row">
                {{ widget('products') }}
                {#{% for product in _view.data.products %}#}
                    {#{% include "@CatalogProductWidget/_catalog-page/product.twig" with {#}
                        {#class: 'small-12 medium-6 large-6 xlarge-4 columns',#}
                        {#idProductAbstract: product.id_product_abstract,#}
                        {#detailsUrl: product.url,#}
                        {#name: product.abstract_name,#}
                        {#priceValue: product.price,#}
                        {#__originalPrice: (product.prices.ORIGINAL is defined ? product.prices.ORIGINAL : null),#}
                        {#imageUrl: (product.images|length ? product.images.0.external_url_small : ''),#}
                        {#__averageRating: (product.rating is defined ? product.rating : null)#}
                    {#} %}#}
                {#{% endfor %}#}
            </div>

            {% include '@CatalogPage/_partials/pagination.twig' %}

        </div>
    </div>

    {% if _view.data.searchString is defined and _view.data.searchString != '' %}
        <input type="hidden" name="q" value="{{ _view.data.searchString }}" />
    {% endif %}
</form>

{{ widget('cmsBlock', 'bottom') }}
